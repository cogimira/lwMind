{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4241","webpack:///./src/App.vue?4d35","webpack:///./lib/dom-event.js","webpack:///./lib/key-control.js","webpack:///./lib/util/dom.js","webpack:///./lib/render/canvas-render.js","webpack:///./lib/core/mind.js","webpack:///./lib/core/mind-node.js","webpack:///./lib/core/interaction.js","webpack:///./lib/graph-stage.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","ref","attrs","on","toggleFullScreen","_v","staticRenderFns","DomEvent","dom","document","sourceTarget","targetSet","Set","tapBind","tap","dragStartBind","dragStart","draggingBind","dragging","dragEndBind","dragEnd","pcDragging","pcMouseMove","mouseMove","isPC","addEventListener","e","targetTouches","changedTouches","userAgentInfo","navigator","userAgent","Agents","flag","v","indexOf","target","add","delete","forEach","element","mouseUp","mouseDown","click","EventEmitter","KeyControl","keyDownMap","Map","keyDownSet","checkKeys","keys","a","b","ctr","w","command","option","initCheckKey","has","keyCode","keyAry","allKeysDown","eventOffsetDom","domRects","getBoundingClientRect","clientX","clientY","x","left","y","top","CanvasRedner","canvas","context","getContext","ratio","getPixelRatio","translate","lastTranslate","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","devicePixelRatio","save","beginPath","arc","Math","PI","fill","restore","clearRect","width","height","root","renderMindNode","children","renderMindRoot","node","showObjRect","fillStyle","color","rect","stroke","font","textAlign","fillText","text","parent","moveTo","parentShowObj","delta","lineTo","Mind","roots","mindNode","renderer","render","MindNode","colors","parseInt","random","marginVertical","marginHorizontal","selected","marginWidth","marginHeight","totalMarginHeight","child","deleteChild","recursionCalMarginRect","childrenHeight","getChildrenMarginHeight","beforeMarginHeight","childrenMarginRect","defualtMarginHeight","afterDeleteChildRect","selfMarginRect","steps","startX","startY","offsetHeight","calLayout","Interaction","point","deltaVector","position","rootStart","positionInRect","collisionChild","collisionTree","GraphStage","options","container","canvasEventer","mindGraph","addListenTarget","canvasRender","mindRender","interaction","test","rootMindNode","innerHeight","addRoot","isDragging","currentPos","domUtil","deltaPos","startPosition","clear","startDrag","reduceDragging","targetTap","isFullScreen","methods","$refs","canvasContainer","exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","console","log","mounted","body","setAttribute","offsetWidth","components","component","Vue","config","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.7abb2c81.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"canvasContainer\",attrs:{\"id\":\"app\"}},[_c('button',{attrs:{\"id\":\"button\"},on:{\"click\":_vm.toggleFullScreen}},[_vm._v(\"全频切换\")]),_c('canvas',{ref:\"canvas\",attrs:{\"id\":\"canvas\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import EventEmitter from \"events\";\n\n// import Hammer from 'hammerjs';\n\nexport class DomEvent extends EventEmitter {\n  constructor(dom) {\n    super();\n    if(!dom) {\n        dom = document;\n    }\n    // this.hammer = new Hammer(dom);\n    this.sourceTarget = dom;\n    this.targetSet = new Set();\n\n    // 点击\n    this.tapBind = this.tap.bind(this);\n    this.dragStartBind = this.dragStart.bind(this);\n    this.draggingBind = this.dragging.bind(this);\n    this.dragEndBind = this.dragEnd.bind(this);\n\n    this.pcDragging = false; // 支持pc端是否在拖拽当中\n\n    this.pcMouseMove = this.mouseMove.bind(this);\n    if(this.isPC()) {\n      dom.addEventListener(\"mouseup\", (e) => {\n        this.pcDragging = false;\n        this.dragEndBind(e);\n      });\n      dom.addEventListener(\"mousemove\", (e) => {\n        if(this.pcDragging) {\n          this.draggingBind(e);\n        } else {\n          this.pcMouseMove(e);\n        }\n      });\n      dom.addEventListener(\"click\", (e) => {\n        this.tapBind(e);\n      });\n      dom.addEventListener(\"mousedown\", (e) => {\n        this.pcDragging = true;\n        this.dragStartBind(e);\n      });\n    } else {\n      dom.addEventListener(\"click\", (e) => {\n        this.tapBind(e);\n      });\n      dom.addEventListener(\"touchstart\", (e) => {\n        this.dragStartBind(e.targetTouches[0]);\n      })\n      dom.addEventListener(\"touchmove\", (e) => {\n        this.draggingBind(e.targetTouches[0]);\n      })\n      dom.addEventListener(\"touchend\", (e) => {\n        this.dragEndBind(e.changedTouches[0]);\n      })\n    }\n    \n  }\n\n  isPC() {\n    var userAgentInfo = navigator.userAgent;\n    var Agents = [\"Android\", \"iPhone\",\n                \"SymbianOS\", \"Windows Phone\",\n                \"iPad\", \"iPod\"];\n    var flag = true;\n    for (var v = 0; v < Agents.length; v++) {\n        if (userAgentInfo.indexOf(Agents[v]) > 0) {\n            flag = false;\n            break;\n        }\n    }\n    return flag;\n}\n  addListenTarget(target) {\n    this.targetSet.add(target);\n  }\n\n  deleteListenTarget(target) {\n    this.targetSet.delete(target);\n  }\n\n  // 敲击屏幕，pc端相当于点击，\n  tap(e) {\n    this.targetSet.forEach(element => {\n      if (element.tap && typeof element.tap === \"function\") {\n        element.tap(e);\n      }\n    });\n  }\n\n  // 在元素上面拖拽\n  dragStart(e) {\n    this.targetSet.forEach(element => {\n      if (element.dragStart && typeof element.dragStart === \"function\") {\n        element.dragStart(e);\n      }\n    });\n  }\n\n  // 拖拽\n  dragging(e) {\n    this.targetSet.forEach(element => {\n      if (element.dragging && typeof element.dragging === \"function\") {\n        element.dragging(e);\n      }\n    });\n  }\n\n  // 结束拖拽\n  dragEnd(e) {\n    this.targetSet.forEach(element => {\n      if (element.dragEnd && typeof element.dragEnd === \"function\") {\n        element.dragEnd(e);\n      }\n    });\n  }\n\n  mouseUp(e) {\n    this.targetSet.forEach(element => {\n      if (element.mouseUp && typeof element.mouseUp === \"function\") {\n        element.mouseUp(e);\n      }\n    });\n  }\n  mouseMove(e) {\n    this.targetSet.forEach(element => {\n      if (element.mouseMove && typeof element.mouseMove === \"function\") {\n        element.mouseMove(e);\n      }\n    });\n  }\n\n  mouseDown(e) {\n    this.targetSet.forEach(element => {\n      if (element.mouseDown && typeof element.mouseDown === \"function\") {\n        element.mouseDown(e);\n      }\n    });\n  }\n\n  click(e) {\n    this.targetSet.forEach(element => {\n      if (element.click && typeof element.click === \"function\") {\n        element.click(e);\n      }\n    });\n  }\n}\n","class KeyControl {\n  constructor() {\n    this.keyDownMap = new Map();\n    this.keyDownSet = new Set();\n    this.checkKeys = new Set();\n    this.keys = {\n      a: 65,\n      b: 66,\n      c: 67,\n      d: 68,\n      ctr: 17,\n      e: 69,\n      s: 83,\n      w: 87,\n      command: 91,\n      option: 18,\n      shift: 16\n    };\n    this.initCheckKey();\n    document.addEventListener(\"keydown\", e => {\n      // console.log(e.keyCode);\n      if (this.checkKeys.has(e.keyCode)) {\n        this.keyDownSet.add(e.keyCode);\n        // console.log(this.keyDownSet);\n      }\n    });\n    document.addEventListener(\"keyup\", e => {\n      this.keyDownSet.delete(e.keyCode);\n      //   // console.log(this.keyDownSet);\n    });\n  }\n\n  initCheckKey() {\n    for (let i in this.keys) {\n      this.checkKeys.add(this.keys[i]);\n    }\n  }\n\n  // 检查传入键是不是同时按下\n  checkKeysDown(keyAry) {\n    let allKeysDown = true;\n    for (let i = 0; i < keyAry.length; i++) {\n      let key = keyAry[i];\n      if (!this.keys[key]) {\n        // 当检查到传入了不检查的键\n        return false;\n      }\n      let keyCode = this.keys[key];\n      if (!this.keyDownSet.has(keyCode)) {\n        allKeysDown = false;\n        return allKeysDown;\n      }\n    }\n    if (allKeysDown) {\n      // console.log(keyAry.join(' - '));\n    }\n    return allKeysDown;\n  }\n}\n\nexport default new KeyControl();\n","export default {\n    eventOffsetDom(e, dom) {\n        let domRects = dom.getBoundingClientRect();\n        let clientX = e.clientX;\n        let clientY = e.clientY;\n        return {\n          x: clientX - domRects.left,\n          y: clientY - domRects.top\n        }\n      }\n}","export class CanvasRedner {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this.context = canvas.getContext(\"2d\");\n        this.ratio = this.getPixelRatio(this.context);\n        this.translate = {\n            x: 0,\n            y: 0\n        }\n\n        this.lastTranslate = {\n            x: 0,\n            y: 0\n        }\n        // this.context.translate(520, 100);\n    }\n\n    startDrag(x, y) {\n        this.lastTranslate = {\n            x: this.translate.x,\n            y: this.translate.y\n        }\n    }\n\n    reduceDragging(x, y) {\n        this.translate = {\n            x: this.lastTranslate.x + x,\n            y: this.lastTranslate.y + y\n        }\n    }\n\n    dragging(x, y) {\n        \n        // this.context.translate(x, y);\n        // this.clear();\n        this.context.translate(-this.translate.x, -this.translate.y);\n        this.context.translate(this.lastTranslate.x + x, this.lastTranslate.y + y);\n        // this.context.translate(-this.translate.x, -this.translate.y);\n        this.translate.x = x + this.lastTranslate.x;\n        this.translate.y = y + this.lastTranslate.y;\n        \n    }\n\n    getPixelRatio(context) {\n        let backingStore = context.backingStorePixelRatio ||\n            context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio || 1;\n        return (window.devicePixelRatio || 1) / backingStore;\n    }\n\n\n    renderNode(target) {\n        this.context.save();\n        this.context.translate(target.x, target.y);\n        this.context.beginPath();\n        this.context.arc(0, 0, target.r / 2, 0, 2 * Math.PI);\n        this.context.fill();\n        this.context.restore();\n    }\n\n    clear() {\n        // this.context.translate(0, 0);\n        this.context.save();\n        this.context.translate(-this.translate.x, -this.translate.y);\n        this.context.clearRect(0, 0,  this.canvas.width, this.canvas.height);\n        this.context.restore();\n    }\n\n    renderMindRoot(root) {\n        // this.context.translate(this.translate.x, this.translate.y);\n        // this.clear();\n        this.renderMindNode(root);\n        if(root.children.length) {\n            for(let i = 0; i < root.children.length; i++) {\n                this.renderMindRoot(root.children[i]);\n            }\n        }\n    }\n\n    renderMindNode(node) {\n        \n        this.context.save();\n        this.context.translate(node.showObjRect.x, node.showObjRect.y);\n        this.context.fillStyle = node.color;\n        this.context.beginPath();\n        this.context.rect(0, 0, node.showObjRect.width, node.showObjRect.height);\n        this.context.stroke();\n        this.context.fill();\n        this.context.restore();\n\n        this.context.save();\n        this.context.translate(node.showObjRect.x, node.showObjRect.y);\n        this.context.beginPath();\n        this.context.fillStyle = \"white\";\n        this.context.font = \"18px serif\";\n        this.context.textAlign = \"center\"\n        this.context.fillText(node.text, node.showObjRect.width / 2, node.showObjRect.height / 2 + 9);\n        // this.context.stroke();\n        this.context.fill();\n        this.context.restore();\n\n        if(node.parent) {\n            this.context.save();\n            this.context.translate(node.showObjRect.x, node.showObjRect.y + node.showObjRect.height / 2);\n            this.context.beginPath();\n            this.context.moveTo(0, 0);\n            let parentShowObj = node.parent.showObjRect;\n            let delta = {\n                x:  (parentShowObj.x + parentShowObj.width) - node.showObjRect.x,\n                y:  (parentShowObj.y + parentShowObj.height / 2) - (node.showObjRect.y + node.showObjRect.height / 2)\n            }\n            // let delta = {\n            //     x:  (parentShowObj.x) - node.showObjRect.x,\n            //     y:  (parentShowObj.y ) - (node.showObjRect.x)\n            // }\n            this.context.lineTo(delta.x, delta.y);\n            this.context.stroke();\n            this.context.restore();\n        }\n\n        // let marginRect = node.getMarginRect();\n        // this.context.save();\n        // this.context.translate(marginRect.x, marginRect.y);\n        // this.context.strokeStyle = \"red\";\n        // this.context.beginPath();\n        // this.context.rect(0, 0, marginRect.width, marginRect.height);\n        // this.context.stroke();\n        // this.context.restore();\n    }\n}","export class Mind {\n  constructor() {\n    this.roots = [];\n  }\n\n  addRoot(mindNode) {\n    if (mindNode.parent) {\n      return;\n    }\n    this.roots.push(mindNode);\n  }\n\n  render(renderer) {\n      for(let i = 0; i < this.roots.length;) {\n          this.roots[i].render(renderer);\n      }\n  }\n}\n","export class MindNode {\n  constructor(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    let colors = [\"red\", \"black\", \"green\", \"pink\", \"blue\", \"orange\"];\n    this.color = colors[parseInt(Math.random() * colors.length)];\n    this.text = parseInt(Math.random() * 20) + \"\";\n    this.width = width || 50;\n    this.height = height || 20;\n    this.marginVertical = 5;\n    this.marginHorizontal = 40;\n    this.selected = false;\n\n    this.marginWidth = this.width + this.marginHorizontal * 2; // 占位高度\n    this.marginHeight = this.height + this.marginVertical * 2; // 占位宽度\n    this.parent = null;\n    this.children = [];\n\n    this.showObjRect = {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    };\n  }\n\n  getMarginRect() {\n    return {\n      x: this.x - this.marginHorizontal,\n      y: this.y - this.marginHeight / 2 + this.height / 2,\n      width: this.marginWidth,\n      height: this.marginHeight\n    };\n  }\n\n  getChildrenMarginHeight() {\n    let totalMarginHeight = 0;\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i];\n      totalMarginHeight += child.marginHeight;\n    }\n\n    return totalMarginHeight;\n  }\n\n  //\n  addChild(child) {\n    this.children.push(child);\n    if (child.parent) {\n      child.parent.marginHeight -= child.marginHeight;\n      child.parent.deleteChild(child);\n    }\n    child.parent = this;\n    // this.marginHeight += child.marginHeight;\n    this.recursionCalMarginRect(child);\n  }\n\n  // 递归计算父亲节点的占位高度\n  recursionCalMarginRect(child) {\n    if (!child.parent) {\n      return;\n    }\n    let childrenHeight = child.parent.getChildrenMarginHeight();\n    if (childrenHeight <= child.parent.marginHeight) {\n      return;\n    }\n    let parent = child.parent;\n    parent.marginHeight = childrenHeight;\n    this.recursionCalMarginRect(parent);\n  }\n\n  afterDeleteChildRect(node, beforeMarginHeight) {\n    \n    let childrenMarginRect = node.getChildrenMarginHeight();\n    if(node.children.length == 0) {\n        node.marginHeight = node.height + node.marginVertical * 2;\n    } else {\n        let defualtMarginHeight = node.height + node.marginVertical * 2;\n        node.marginHeight = childrenMarginRect > defualtMarginHeight ?  childrenMarginRect : defualtMarginHeight;\n    }\n    \n    if(!node.parent) {\n        return;\n    }\n    this.afterDeleteChildRect(node.parent, beforeMarginHeight);\n  }\n  \n\n  deleteChild(child) {\n      let beforeMarginHeight = this.getChildrenMarginHeight();\n    for (let i = 0; i < this.children.length; i++) {\n      if (child == this.children[i]) {\n        this.children.splice(i, 1);\n      }\n    }\n    this.afterDeleteChildRect(this, beforeMarginHeight);\n  }\n\n  //\n  calMarginRect() {\n    let selfMarginRect = {\n      width: this.width + this.marginHorizontal * 2,\n      height: this.height + this.marginVertical * 2\n    };\n\n    let totalMarginHeight = 0;\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i];\n      totalMarginHeight += child.marginHeight;\n    }\n\n    selfMarginRect.height =\n      selfMarginRect.height > totalMarginHeight\n        ? selfMarginRect.height\n        : totalMarginHeight;\n\n    return selfMarginRect;\n  }\n\n  calLayout(mindNode, steps) {\n    let totalMarginHeight = mindNode.getChildrenMarginHeight();\n    let startX = mindNode.x + mindNode.marginWidth;\n    let startY = mindNode.y + mindNode.height / 2 - totalMarginHeight / 2;\n    let offsetHeight = 0;\n\n    for (let i = 0; i < mindNode.children.length; i++) {\n      let child = mindNode.children[i];\n      child.showObjRect.x = startX;\n      child.x = startX;\n      child.showObjRect.y =\n        startY + offsetHeight + child.marginHeight / 2 - child.height / 2;\n      child.y = child.showObjRect.y;\n      offsetHeight += child.marginHeight;\n    }\n\n    for (let i = 0; i < mindNode.children.length; i++) {\n      this.calLayout(mindNode.children[i], ++steps);\n    }\n  }\n\n  render(renderer) {\n    // 计算布局\n    this.calLayout(this, 1);\n    renderer.renderMindRoot(this);\n  }\n}\n","export class Interaction {\n    constructor() {\n\n  }\n\n  positionInRect(point, rect) {\n    let deltaVector = { x: point.x - rect.x, y: point.y - rect.y };\n    if (\n      deltaVector.x > 0 &&\n      deltaVector.x < rect.width &&\n      deltaVector.y > 0 &&\n      deltaVector.y < rect.height\n    ) {\n        return true;\n    } else {\n        return false;\n    }\n  }\n\n  collisionTree(position, rootStart) {\n    let showObjRect = {\n      x: rootStart.x,\n      y: rootStart.y,\n      width: rootStart.width,\n      height: rootStart.height\n    };\n\n    if(this.positionInRect(position, showObjRect)) {\n        return rootStart;\n    } else {\n        if(rootStart.children.length) {\n            for(let i = 0; i < rootStart.children.length; i++) {\n                let child = rootStart.children[i];\n                let collisionChild = this.collisionTree(position, child);\n                if(collisionChild) {\n                    return collisionChild;\n                }\n            }\n        }\n        \n    }\n    \n  }\n}\n","import EventEmitter from \"events\";\nimport { DomEvent } from \"./dom-event\";\nimport keyControl from \"./key-control\";\nimport domUtil from \"./util/dom\";\n// import graphService from \"./graph-service\";\nimport { CanvasRedner } from \"./render/canvas-render\";\n// import global from \"./global\";\n// import worldTime from \"./world-time\";\n// import { Menu } from \"./menu\";\n\nimport { Mind } from \"./core/mind\";\nimport { MindNode } from \"./core/mind-node\";\nimport {Interaction} from './core/interaction';\n\nexport class GraphStage extends EventEmitter {\n  constructor(canvas, options) {\n    super();\n    this.container = options.container;\n    this.canvas = canvas;\n    this.canvasEventer = new DomEvent(canvas);\n    this.mindGraph = new Mind();\n    this.canvasEventer.addListenTarget(this);\n    this.canvasEventer.addListenTarget(this.mindGraph);\n    this.canvasRender = new CanvasRedner(canvas);\n    this.mindGraph.mindRender = this.canvasRender;\n    this.interaction = new Interaction();\n    this.test();\n  }\n\n  test() {\n    // this.mindGraph = new Mind();\n    let rootMindNode = new MindNode(10, window.innerHeight / 2 - 10, 50, 20);\n    this.mindGraph.addRoot(rootMindNode);\n    this.rootMindNode = rootMindNode;\n    rootMindNode.render(this.canvasRender);\n    window.rootMindNode = rootMindNode;\n  }\n\n  dragging(e) {\n    if (this.isDragging) {\n      let currentPos = domUtil.eventOffsetDom(e, this.canvas);\n      let deltaPos = {\n        x: currentPos.x - this.startPosition.x,\n        y: currentPos.y - this.startPosition.y\n      };\n      this.canvasRender.clear();\n      this.canvasRender.dragging(deltaPos.x, deltaPos.y);\n      this.rootMindNode.render(this.canvasRender);\n    }\n  }\n\n  dragStart(e) {\n    // if (keyControl.checkKeysDown([\"command\"])) {\n      this.isDragging = true;\n      this.startPosition = domUtil.eventOffsetDom(e, this.canvas);\n      this.canvasRender.startDrag(this.startPosition.x, this.startPosition.y);\n    // }\n  }\n\n  dragEnd(e) {\n    this.isDragging = false;\n    let currentPos = domUtil.eventOffsetDom(e, this.canvas);\n      let deltaPos = {\n        x: currentPos.x - this.startPosition.x,\n        y: currentPos.y - this.startPosition.y\n      };\n    this.canvasRender.reduceDragging(deltaPos.x, deltaPos.y);\n  }\n\n  tap(e) {\n    let a = domUtil.eventOffsetDom(e, this.canvas);\n    a.x -= this.canvasRender.translate.x;\n    a.y -= this.canvasRender.translate.y;\n    \n    let targetTap = this.interaction.collisionTree(a, this.rootMindNode);\n    if(targetTap) {\n      targetTap.selected = true;\n    }\n    // console.log(targetTap);\n  }\n}\n\n// let previous = 0\n// requestAnimationFrame(function tick (time) {\n//   const duration = time - previous\n//   worldTime.tick((value) => Math.round(value * duration / 1000))\n//   previous = time\n//   requestAnimationFrame(tick)\n// })\n","<template>\n  <div id=\"app\" ref=\"canvasContainer\">\n    <button id=\"button\" @click=\"toggleFullScreen\">全频切换</button>\n    <canvas id=\"canvas\" ref=\"canvas\"> </canvas>\n  </div>\n</template>\n\n<script>\nimport { GraphStage } from \"../lib/graph-stage\";\nexport default {\n  name: \"app\",\n  data() {\n    return {\n      isFullScreen: false\n    };\n  },\n  methods: {\n    toggleFullScreen() {\n      if (!this.isFullScreen) {\n        if (this.$refs.canvasContainer.requestFullscreen) {\n          this.$refs.canvasContainer.requestFullscreen();\n        } else if (this.$refs.canvasContainer.webkitRequestFullScreen) {\n          this.$refs.canvasContainer.webkitRequestFullScreen();\n        } else if (this.$refs.canvasContainer.mozRequestFullScreen) {\n          this.$refs.canvasContainer.mozRequestFullScreen();\n        } else if (this.$refs.canvasContainer.msRequestFullscreen) {\n          // IE11\n          this.$refs.canvasContainer.msRequestFullscreen();\n        }\n        console.log(\"已全屏！\");\n        \n        this.isFullScreen = !this.isFullScreen;\n      } else {\n        if (this.$refs.canvasContainer.exitFullscreen) {\n          this.$refs.canvasContainer.exitFullscreen();\n        } else if (this.$refs.canvasContainer.webkitCancelFullScreen) {\n          this.$refs.canvasContainer.webkitCancelFullScreen();\n        } else if (this.$refs.canvasContainer.mozCancelFullScreen) {\n          this.$refs.canvasContainer.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          this.$refs.canvasContainer.msExitFullscreen();\n        }\n        this.isFullScreen = !this.isFullScreen;\n      }\n    }\n  },\n  mounted() {\n    document.body.addEventListener('touchmove' , function(e){ \n    e.preventDefault(); \n});\n    let canvas = document.getElementById(\"canvas\");\n    canvas.setAttribute(\"width\", document.body.offsetWidth);\n    canvas.setAttribute(\"height\", window.innerHeight);\n    let appContainer = document.getElementById(\"app\");\n    new GraphStage(canvas, { container: appContainer });\n  },\n  components: {}\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  position: relative;\n  /* zoom: 0.5; */\n  /* margin-top: 20px; */\n}\n#button {\n  position: absolute;\n  left: 50px;\n  top: 50px;\n  background: orange;\n}\n\ncanvas {\n  background: white;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4de0afd8&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport App from './App.vue';\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n"],"sourceRoot":""}